# attendance-record

## これは何？

- 勤怠記録周りを便利にするアプリです。
- 一日ごとの勤務時間と休憩時間の累計を表示します。
- 一ヶ月ごとの累計残業時間計算もできます。（後ほど実装予定）

## 各モジュールの構成

- `attendance-record/client`: クライアント (GUIアプリ) のモジュール。
- `attendance-record/domain`: ドメイン層のモジュール。ビジネスロジックを実装します。
- `attendance-record/infrastructure`: インフラ層のモジュール。DBとのやり取りによる永続化などを実装します。
- `attendance-record/usecase`: ユースケース層のモジュール。クライアントとバックエンドを繋ぎます。
- `attendance-record/shared`: 共通利用モジュール。バックエンドの起動処理やユーティリティコマンドなどを含みます。

## ビルドの手順

### その場で実行

- プロジェクトのルートディレクトリで以下のコマンドを入力します。

```
> go run .
```

### リリースビルド

- Windowsの場合、以下のコマンドで`bin`ディレクトリに実行ファイルが生成されます。

```
> go build -o ./bin -ldflags="-H=windowsgui -w -s" .
```

### コードの自動生成について

- 依存性注入のため、[Wire](https://github.com/google/wire)によるコードの自動生成を利用しています。
- 各モジュールごとに`wire_set.go`があり、`Set`変数で注入内容を定義しています。この内容を変更するとインターフェイスに紐付ける実装を変更できます。
- Setを編集したら、ルートディレクトリで`wire`コマンドを実行してください。コードが自動生成されます。
  - 事前に下記コマンドで`wire`コマンドを`%GOPATH%\bin`にインストールしておいてください。

  ```
  > go install github.com/google/wire/cmd/wire@latest
  ```

  - 予め`%GOPATH%\bin`を環境変数のPATHに追加しておいてください。（Windowsだと通常は`%USERPROFILE%\go\bin`にあります。）


## Todo

- ユーザーが任意の標準勤務時間を設定する（8時間勤務、6時間勤務など）
- 一ヶ月ごとの累計残業時間を割り出す（標準勤務時間を設定後に利用可能）
- 各種のアラート機能
  - 定時の予定時刻 or 22時の前にアラートを出す
  - 休憩予定時刻の前にアラートを出す
    - 休憩予定時刻はどうやって設定するか？要検討。
- 手動での打刻データ編集
  - 簡易的でもいいので、データグリッド的な画面から編集できるようにしたい
